import wollok.game.*
import simulacion.*
import manzanas.*
import agenteDeSalud.*

object pandemiaGameConfig {
	method height() = 5
	method width() = 5
	method title() = "Simuléichon"
	
	method configureGame() {
		self.configureGameParameters()
		self.agregarManzanas()
		self.agregarAgenteDeSalud()
		// agregar las teclas de acciones
		// después, al agente de salud y sus teclas de acciones y movimiento
	}
		
	method configureGameParameters() {
		game.height(self.height())
		game.width(self.width())
		game.title(self.title())
	}
	
	method agregarManzanas() {
		(1..game.width()).forEach({x => 
			(1..game.height()).forEach({y => 
				const nuevaManzana = simulacion.crearManzana()
				nuevaManzana.position(game.at(x-1,y-1))
				simulacion.agregarManzana(nuevaManzana)
				game.addVisual(nuevaManzana)
			})
		})
	}
	
	method agregarAgenteDeSalud(){
	game.addVisual(agenteDeSalud)
	keyboard.up().onPressDo{agenteDeSalud.moverArriba()}
	keyboard.down().onPressDo{agenteDeSalud.moverAbajo()}
	keyboard.right().onPressDo{agenteDeSalud.moverDerecha()}
	keyboard.left().onPressDo{agenteDeSalud.moverIzquierda()}
	}
	
}


program pandemiaGame {
	
	pandemiaGameConfig.configureGame()

	
	game.start()
}

